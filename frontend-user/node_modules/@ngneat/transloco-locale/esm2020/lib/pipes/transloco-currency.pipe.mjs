import { Pipe, ChangeDetectorRef, Inject, } from '@angular/core';
import { isNil } from '@ngneat/transloco';
import { getDefaultOptions } from '../shared';
import { LOCALE_CONFIG } from '../transloco-locale.config';
import { TranslocoLocaleService } from '../transloco-locale.service';
import { TranslocoLocalePipe } from './transloco-locale.pipe';
import * as i0 from "@angular/core";
import * as i1 from "../transloco-locale.service";
export class TranslocoCurrencyPipe extends TranslocoLocalePipe {
    constructor(translocoLocaleService, cdr, localeConfig) {
        super(translocoLocaleService, cdr);
        this.translocoLocaleService = translocoLocaleService;
        this.cdr = cdr;
        this.localeConfig = localeConfig;
    }
    /**
     * Transform a given number into the locale's currency format.
     *
     * @example
     *
     * 1000000 | translocoCurrency: 'symbol' : {} : USD // $1,000,000.00
     * 1000000 | translocoCurrency: 'name' : {} : USD // 1,000,000.00 US dollars
     * 1000000 | translocoCurrency: 'symbol' : {minimumFractionDigits: 0 } : USD // $1,000,000
     *
     */
    transform(value, display = 'symbol', numberFormatOptions = {}, currencyCode, locale) {
        if (isNil(value))
            return '';
        locale = this.getLocale(locale);
        const options = {
            ...getDefaultOptions(locale, 'currency', this.localeConfig),
            ...numberFormatOptions,
            currencyDisplay: display,
            currency: currencyCode || this.translocoLocaleService._resolveCurrencyCode(),
        };
        return this.translocoLocaleService.localizeNumber(value, 'currency', locale, options);
    }
    ngOnDestroy() {
        super.onDestroy();
    }
}
TranslocoCurrencyPipe.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.0", ngImport: i0, type: TranslocoCurrencyPipe, deps: [{ token: i1.TranslocoLocaleService }, { token: i0.ChangeDetectorRef }, { token: LOCALE_CONFIG }], target: i0.ɵɵFactoryTarget.Pipe });
TranslocoCurrencyPipe.ɵpipe = i0.ɵɵngDeclarePipe({ minVersion: "12.0.0", version: "13.3.0", ngImport: i0, type: TranslocoCurrencyPipe, name: "translocoCurrency", pure: false });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.0", ngImport: i0, type: TranslocoCurrencyPipe, decorators: [{
            type: Pipe,
            args: [{
                    name: 'translocoCurrency',
                    pure: false,
                }]
        }], ctorParameters: function () { return [{ type: i1.TranslocoLocaleService }, { type: i0.ChangeDetectorRef }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [LOCALE_CONFIG]
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNsb2NvLWN1cnJlbmN5LnBpcGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9saWJzL3RyYW5zbG9jby1sb2NhbGUvc3JjL2xpYi9waXBlcy90cmFuc2xvY28tY3VycmVuY3kucGlwZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsSUFBSSxFQUVKLGlCQUFpQixFQUNqQixNQUFNLEdBRVAsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQzFDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUM5QyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDM0QsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFPckUsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0seUJBQXlCLENBQUM7OztBQU05RCxNQUFNLE9BQU8scUJBQ1gsU0FBUSxtQkFBbUI7SUFHM0IsWUFDWSxzQkFBOEMsRUFDOUMsR0FBc0IsRUFDRCxZQUEwQjtRQUV6RCxLQUFLLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFKekIsMkJBQXNCLEdBQXRCLHNCQUFzQixDQUF3QjtRQUM5QyxRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQUNELGlCQUFZLEdBQVosWUFBWSxDQUFjO0lBRzNELENBQUM7SUFFRDs7Ozs7Ozs7O09BU0c7SUFDSCxTQUFTLENBQ1AsS0FBc0IsRUFDdEIsVUFBc0MsUUFBUSxFQUM5QyxzQkFBMkMsRUFBRSxFQUM3QyxZQUF1QixFQUN2QixNQUFlO1FBRWYsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDO1lBQUUsT0FBTyxFQUFFLENBQUM7UUFDNUIsTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFaEMsTUFBTSxPQUFPLEdBQUc7WUFDZCxHQUFHLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQztZQUMzRCxHQUFHLG1CQUFtQjtZQUN0QixlQUFlLEVBQUUsT0FBTztZQUN4QixRQUFRLEVBQ04sWUFBWSxJQUFJLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxvQkFBb0IsRUFBRTtTQUNyRSxDQUFDO1FBQ0YsT0FBTyxJQUFJLENBQUMsc0JBQXNCLENBQUMsY0FBYyxDQUMvQyxLQUFLLEVBQ0wsVUFBVSxFQUNWLE1BQU0sRUFDTixPQUFPLENBQ1IsQ0FBQztJQUNKLENBQUM7SUFFRCxXQUFXO1FBQ1QsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ3BCLENBQUM7O2tIQWpEVSxxQkFBcUIseUZBT3RCLGFBQWE7Z0hBUFoscUJBQXFCOzJGQUFyQixxQkFBcUI7a0JBSmpDLElBQUk7bUJBQUM7b0JBQ0osSUFBSSxFQUFFLG1CQUFtQjtvQkFDekIsSUFBSSxFQUFFLEtBQUs7aUJBQ1o7OzBCQVFJLE1BQU07MkJBQUMsYUFBYSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIFBpcGUsXG4gIFBpcGVUcmFuc2Zvcm0sXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBJbmplY3QsXG4gIE9uRGVzdHJveSxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBpc05pbCB9IGZyb20gJ0BuZ25lYXQvdHJhbnNsb2NvJztcbmltcG9ydCB7IGdldERlZmF1bHRPcHRpb25zIH0gZnJvbSAnLi4vc2hhcmVkJztcbmltcG9ydCB7IExPQ0FMRV9DT05GSUcgfSBmcm9tICcuLi90cmFuc2xvY28tbG9jYWxlLmNvbmZpZyc7XG5pbXBvcnQgeyBUcmFuc2xvY29Mb2NhbGVTZXJ2aWNlIH0gZnJvbSAnLi4vdHJhbnNsb2NvLWxvY2FsZS5zZXJ2aWNlJztcbmltcG9ydCB7XG4gIE51bWJlckZvcm1hdE9wdGlvbnMsXG4gIEN1cnJlbmN5LFxuICBMb2NhbGUsXG4gIExvY2FsZUNvbmZpZyxcbn0gZnJvbSAnLi4vdHJhbnNsb2NvLWxvY2FsZS50eXBlcyc7XG5pbXBvcnQgeyBUcmFuc2xvY29Mb2NhbGVQaXBlIH0gZnJvbSAnLi90cmFuc2xvY28tbG9jYWxlLnBpcGUnO1xuXG5AUGlwZSh7XG4gIG5hbWU6ICd0cmFuc2xvY29DdXJyZW5jeScsXG4gIHB1cmU6IGZhbHNlLFxufSlcbmV4cG9ydCBjbGFzcyBUcmFuc2xvY29DdXJyZW5jeVBpcGVcbiAgZXh0ZW5kcyBUcmFuc2xvY29Mb2NhbGVQaXBlXG4gIGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSwgT25EZXN0cm95XG57XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCB0cmFuc2xvY29Mb2NhbGVTZXJ2aWNlOiBUcmFuc2xvY29Mb2NhbGVTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIEBJbmplY3QoTE9DQUxFX0NPTkZJRykgcHJpdmF0ZSBsb2NhbGVDb25maWc6IExvY2FsZUNvbmZpZ1xuICApIHtcbiAgICBzdXBlcih0cmFuc2xvY29Mb2NhbGVTZXJ2aWNlLCBjZHIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zZm9ybSBhIGdpdmVuIG51bWJlciBpbnRvIHRoZSBsb2NhbGUncyBjdXJyZW5jeSBmb3JtYXQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIDEwMDAwMDAgfCB0cmFuc2xvY29DdXJyZW5jeTogJ3N5bWJvbCcgOiB7fSA6IFVTRCAvLyAkMSwwMDAsMDAwLjAwXG4gICAqIDEwMDAwMDAgfCB0cmFuc2xvY29DdXJyZW5jeTogJ25hbWUnIDoge30gOiBVU0QgLy8gMSwwMDAsMDAwLjAwIFVTIGRvbGxhcnNcbiAgICogMTAwMDAwMCB8IHRyYW5zbG9jb0N1cnJlbmN5OiAnc3ltYm9sJyA6IHttaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDAgfSA6IFVTRCAvLyAkMSwwMDAsMDAwXG4gICAqXG4gICAqL1xuICB0cmFuc2Zvcm0oXG4gICAgdmFsdWU6IG51bWJlciB8IHN0cmluZyxcbiAgICBkaXNwbGF5OiAnY29kZScgfCAnc3ltYm9sJyB8ICduYW1lJyA9ICdzeW1ib2wnLFxuICAgIG51bWJlckZvcm1hdE9wdGlvbnM6IE51bWJlckZvcm1hdE9wdGlvbnMgPSB7fSxcbiAgICBjdXJyZW5jeUNvZGU/OiBDdXJyZW5jeSxcbiAgICBsb2NhbGU/OiBMb2NhbGVcbiAgKTogc3RyaW5nIHtcbiAgICBpZiAoaXNOaWwodmFsdWUpKSByZXR1cm4gJyc7XG4gICAgbG9jYWxlID0gdGhpcy5nZXRMb2NhbGUobG9jYWxlKTtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAuLi5nZXREZWZhdWx0T3B0aW9ucyhsb2NhbGUsICdjdXJyZW5jeScsIHRoaXMubG9jYWxlQ29uZmlnKSxcbiAgICAgIC4uLm51bWJlckZvcm1hdE9wdGlvbnMsXG4gICAgICBjdXJyZW5jeURpc3BsYXk6IGRpc3BsYXksXG4gICAgICBjdXJyZW5jeTpcbiAgICAgICAgY3VycmVuY3lDb2RlIHx8IHRoaXMudHJhbnNsb2NvTG9jYWxlU2VydmljZS5fcmVzb2x2ZUN1cnJlbmN5Q29kZSgpLFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsb2NvTG9jYWxlU2VydmljZS5sb2NhbGl6ZU51bWJlcihcbiAgICAgIHZhbHVlLFxuICAgICAgJ2N1cnJlbmN5JyxcbiAgICAgIGxvY2FsZSxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgc3VwZXIub25EZXN0cm95KCk7XG4gIH1cbn1cbiJdfQ==