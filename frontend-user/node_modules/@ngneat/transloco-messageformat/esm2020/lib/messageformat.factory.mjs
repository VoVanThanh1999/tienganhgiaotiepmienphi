import MessageFormat from '@messageformat/core';
export function defaultFactory(locales, messageConfig) {
    return new MessageFormat(locales, messageConfig);
}
export function cachedFactory(locales, messageConfig) {
    const mf = defaultFactory(locales, messageConfig);
    const original = mf.compile;
    const cache = new Map();
    const localeKey = `__${locales?.toString() || MessageFormat.defaultLocale}__`;
    mf.compile = function (messages) {
        const cacheKey = `${localeKey}${messages}`;
        const cachedMsg = cache.get(cacheKey);
        if (cachedMsg) {
            return cachedMsg;
        }
        const msg = original.call(this, messages);
        cache.set(cacheKey, msg);
        return msg;
    };
    return mf;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZWZvcm1hdC5mYWN0b3J5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbGlicy90cmFuc2xvY28tbWVzc2FnZWZvcm1hdC9zcmMvbGliL21lc3NhZ2Vmb3JtYXQuZmFjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLGFBR04sTUFBTSxxQkFBcUIsQ0FBQztBQU83QixNQUFNLFVBQVUsY0FBYyxDQUM1QixPQUFpQixFQUNqQixhQUE2QztJQUU3QyxPQUFPLElBQUksYUFBYSxDQUFXLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQztBQUM3RCxDQUFDO0FBRUQsTUFBTSxVQUFVLGFBQWEsQ0FDM0IsT0FBaUIsRUFDakIsYUFBNkM7SUFFN0MsTUFBTSxFQUFFLEdBQUcsY0FBYyxDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQztJQUNsRCxNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDO0lBQzVCLE1BQU0sS0FBSyxHQUFHLElBQUksR0FBRyxFQUFxQyxDQUFDO0lBQzNELE1BQU0sU0FBUyxHQUFHLEtBQUssT0FBTyxFQUFFLFFBQVEsRUFBRSxJQUFJLGFBQWEsQ0FBQyxhQUFhLElBQUksQ0FBQztJQUU5RSxFQUFFLENBQUMsT0FBTyxHQUFHLFVBQVUsUUFBZ0I7UUFDckMsTUFBTSxRQUFRLEdBQUcsR0FBRyxTQUFTLEdBQUcsUUFBUSxFQUFFLENBQUM7UUFDM0MsTUFBTSxTQUFTLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUV0QyxJQUFJLFNBQVMsRUFBRTtZQUNiLE9BQU8sU0FBUyxDQUFDO1NBQ2xCO1FBRUQsTUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDMUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFFekIsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDLENBQUM7SUFFRixPQUFPLEVBQUUsQ0FBQztBQUNaLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNRkxvY2FsZSB9IGZyb20gJy4vbWVzc2FnZWZvcm1hdC5jb25maWcnO1xuaW1wb3J0IE1lc3NhZ2VGb3JtYXQsIHtcbiAgTWVzc2FnZUZvcm1hdE9wdGlvbnMsXG4gIE1lc3NhZ2VGdW5jdGlvbixcbn0gZnJvbSAnQG1lc3NhZ2Vmb3JtYXQvY29yZSc7XG5cbmV4cG9ydCB0eXBlIE1GRmFjdG9yeSA9IChcbiAgbG9jYWxlczogTUZMb2NhbGUsXG4gIG1lc3NhZ2VDb25maWc6IE1lc3NhZ2VGb3JtYXRPcHRpb25zPCdzdHJpbmcnPlxuKSA9PiBNZXNzYWdlRm9ybWF0O1xuXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdEZhY3RvcnkoXG4gIGxvY2FsZXM6IE1GTG9jYWxlLFxuICBtZXNzYWdlQ29uZmlnOiBNZXNzYWdlRm9ybWF0T3B0aW9uczwnc3RyaW5nJz5cbik6IE1lc3NhZ2VGb3JtYXQge1xuICByZXR1cm4gbmV3IE1lc3NhZ2VGb3JtYXQ8J3N0cmluZyc+KGxvY2FsZXMsIG1lc3NhZ2VDb25maWcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FjaGVkRmFjdG9yeShcbiAgbG9jYWxlczogTUZMb2NhbGUsXG4gIG1lc3NhZ2VDb25maWc6IE1lc3NhZ2VGb3JtYXRPcHRpb25zPCdzdHJpbmcnPlxuKTogTWVzc2FnZUZvcm1hdCB7XG4gIGNvbnN0IG1mID0gZGVmYXVsdEZhY3RvcnkobG9jYWxlcywgbWVzc2FnZUNvbmZpZyk7XG4gIGNvbnN0IG9yaWdpbmFsID0gbWYuY29tcGlsZTtcbiAgY29uc3QgY2FjaGUgPSBuZXcgTWFwPHN0cmluZywgTWVzc2FnZUZ1bmN0aW9uPCdzdHJpbmcnPj4oKTtcbiAgY29uc3QgbG9jYWxlS2V5ID0gYF9fJHtsb2NhbGVzPy50b1N0cmluZygpIHx8IE1lc3NhZ2VGb3JtYXQuZGVmYXVsdExvY2FsZX1fX2A7XG5cbiAgbWYuY29tcGlsZSA9IGZ1bmN0aW9uIChtZXNzYWdlczogc3RyaW5nKTogTWVzc2FnZUZ1bmN0aW9uPCdzdHJpbmcnPiB7XG4gICAgY29uc3QgY2FjaGVLZXkgPSBgJHtsb2NhbGVLZXl9JHttZXNzYWdlc31gO1xuICAgIGNvbnN0IGNhY2hlZE1zZyA9IGNhY2hlLmdldChjYWNoZUtleSk7XG5cbiAgICBpZiAoY2FjaGVkTXNnKSB7XG4gICAgICByZXR1cm4gY2FjaGVkTXNnO1xuICAgIH1cblxuICAgIGNvbnN0IG1zZyA9IG9yaWdpbmFsLmNhbGwodGhpcywgbWVzc2FnZXMpO1xuICAgIGNhY2hlLnNldChjYWNoZUtleSwgbXNnKTtcblxuICAgIHJldHVybiBtc2c7XG4gIH07XG5cbiAgcmV0dXJuIG1mO1xufVxuIl19