#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const command_line_args_1 = tslib_1.__importDefault(require("command-line-args"));
const transloco_optimize_1 = require("./lib/transloco-optimize");
const optionDefinitions = [
    { name: 'commentsKey', alias: 'k', type: String, defaultValue: 'comment' },
    { name: 'dist', alias: 'd', type: String, defaultOption: true },
];
const { dist, commentsKey } = command_line_args_1.default(optionDefinitions);
transloco_optimize_1.getTranslationFiles(dist)
    .then((filesPaths) => {
    if (filesPaths.length === 0) {
        return Promise.reject(`Transloco Optimize: No Translation path found under: ${transloco_optimize_1.getTranslationsFolder(dist)}`);
    }
    console.log(`Transloco Optimize: found ${filesPaths.length} translation files, optimizing...`);
    return transloco_optimize_1.optimizeFiles(filesPaths, commentsKey);
})
    .then(() => {
    console.log('Transloco Optimize: Done! ðŸŽŠ ');
})
    .catch((err) => {
    console.warn(err);
});
